
<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta content="IE=edge,chrome=1" http-equiv="X-UA-Compatible">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <title>API Documentation</title>
    <link href="../../images/favicon-3eb77247.ico" rel="icon" type="image/ico" />
    <style>
      .highlight table td { padding: 5px; }
.highlight table pre { margin: 0; }
.highlight .gh {
  color: #999999;
}
.highlight .sr {
  color: #f6aa11;
}
.highlight .go {
  color: #888888;
}
.highlight .gp {
  color: #555555;
}
.highlight .gs {
}
.highlight .gu {
  color: #aaaaaa;
}
.highlight .nb {
  color: #f6aa11;
}
.highlight .cm {
  color: #75715e;
}
.highlight .cp {
  color: #75715e;
}
.highlight .c1 {
  color: #75715e;
}
.highlight .cs {
  color: #75715e;
}
.highlight .c, .highlight .ch, .highlight .cd, .highlight .cpf {
  color: #75715e;
}
.highlight .err {
  color: #960050;
}
.highlight .gr {
  color: #960050;
}
.highlight .gt {
  color: #960050;
}
.highlight .gd {
  color: #49483e;
}
.highlight .gi {
  color: #49483e;
}
.highlight .ge {
  color: #49483e;
}
.highlight .kc {
  color: #66d9ef;
}
.highlight .kd {
  color: #66d9ef;
}
.highlight .kr {
  color: #66d9ef;
}
.highlight .no {
  color: #66d9ef;
}
.highlight .kt {
  color: #66d9ef;
}
.highlight .mf {
  color: #ae81ff;
}
.highlight .mh {
  color: #ae81ff;
}
.highlight .il {
  color: #ae81ff;
}
.highlight .mi {
  color: #ae81ff;
}
.highlight .mo {
  color: #ae81ff;
}
.highlight .m, .highlight .mb, .highlight .mx {
  color: #ae81ff;
}
.highlight .sc {
  color: #ae81ff;
}
.highlight .se {
  color: #ae81ff;
}
.highlight .ss {
  color: #ae81ff;
}
.highlight .sd {
  color: #e6db74;
}
.highlight .s2 {
  color: #e6db74;
}
.highlight .sb {
  color: #e6db74;
}
.highlight .sh {
  color: #e6db74;
}
.highlight .si {
  color: #e6db74;
}
.highlight .sx {
  color: #e6db74;
}
.highlight .s1 {
  color: #e6db74;
}
.highlight .s, .highlight .sa, .highlight .dl {
  color: #e6db74;
}
.highlight .na {
  color: #a6e22e;
}
.highlight .nc {
  color: #a6e22e;
}
.highlight .nd {
  color: #a6e22e;
}
.highlight .ne {
  color: #a6e22e;
}
.highlight .nf, .highlight .fm {
  color: #a6e22e;
}
.highlight .vc {
  color: #ffffff;
}
.highlight .nn {
  color: #ffffff;
}
.highlight .ni {
  color: #ffffff;
}
.highlight .bp {
  color: #ffffff;
}
.highlight .vg {
  color: #ffffff;
}
.highlight .vi {
  color: #ffffff;
}
.highlight .nv, .highlight .vm {
  color: #ffffff;
}
.highlight .w {
  color: #ffffff;
}
.highlight {
  color: #ffffff;
}
.highlight .n, .highlight .py, .highlight .nx {
  color: #ffffff;
}
.highlight .nl {
  color: #f92672;
}
.highlight .ow {
  color: #f92672;
}
.highlight .nt {
  color: #f92672;
}
.highlight .k, .highlight .kv {
  color: #f92672;
}
.highlight .kn {
  color: #f92672;
}
.highlight .kp {
  color: #f92672;
}
.highlight .o {
  color: #f92672;
}
    </style>
    <link href="../../stylesheets/screen-bcf56b31.css" rel="stylesheet" media="screen" />
    <link href="../../stylesheets/print-953e3353.css" rel="stylesheet" media="print" />
      <script src="../../javascripts/all_nosearch-8f5ea5a5.js"></script>

  </head>

  <body class="fix fix_cn fix_cn_index" data-languages="[]">
    <a href="#" id="nav-button">
      <span>
        <img src="../../images/navbar-cad8cdcb.png" alt="" />
      </span>
    </a>
    <header>
    <div class="flex_box">
      <img src="../../images/logo-d7d2b532.svg" class="logo" alt="" />
      <div class="nav-row-wrap">
        <div id="navBox" class="nav_box"></div>
        <div id="menuDropdownBtn" class="noselect menu-dropdown-btn">
          <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-chevron-down"><polyline points="6 9 12 15 18 9"></polyline></svg>
          <div id="menuDropdown" class="menu-dropdown hide"></div>
        </div>
      </div>
    </div>

  </header>
    <div class="toc-wrapper">
      <ul id="toc" class="toc-list-h1">
          <li>
            <a href="#fix-api" class="toc-h1 toc-link" data-title="FIX API">FIX API</a>
          </li>
          <li>
            <a href="#185368440e" class="toc-h1 toc-link" data-title="更新日志">更新日志</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#1-1-3-2023-7-10" class="toc-h2 toc-link" data-title="版本 1.1.3（2023年7月10日）">版本 1.1.3（2023年7月10日）</a>
                  </li>
                  <li>
                    <a href="#1-1-2-2023-7-10" class="toc-h2 toc-link" data-title="版本 1.1.2（2023年7月10日）">版本 1.1.2（2023年7月10日）</a>
                  </li>
                  <li>
                    <a href="#1-1-1-2023-2-7" class="toc-h2 toc-link" data-title="版本 1.1.1（2023年2月7日）">版本 1.1.1（2023年2月7日）</a>
                  </li>
                  <li>
                    <a href="#1-1-0-2022-12-6" class="toc-h2 toc-link" data-title="版本 1.1.0（2022年12月6日）">版本 1.1.0（2022年12月6日）</a>
                  </li>
                  <li>
                    <a href="#1-0-0-2022-10-18" class="toc-h2 toc-link" data-title="版本 1.0.0（2022年10月18日）">版本 1.0.0（2022年10月18日）</a>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#887e990e90" class="toc-h1 toc-link" data-title="速率限制">速率限制</a>
          </li>
          <li>
            <a href="#dc6de3fa86" class="toc-h1 toc-link" data-title="消息">消息</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#8402e80a51" class="toc-h2 toc-link" data-title="常见请求属性">常见请求属性</a>
                  </li>
                  <li>
                    <a href="#a" class="toc-h2 toc-link" data-title="登录 (A)">登录 (A)</a>
                  </li>
                  <li>
                    <a href="#0" class="toc-h2 toc-link" data-title="心跳 (0)">心跳 (0)</a>
                  </li>
                  <li>
                    <a href="#1" class="toc-h2 toc-link" data-title="测试请求 (1)">测试请求 (1)</a>
                  </li>
                  <li>
                    <a href="#5" class="toc-h2 toc-link" data-title="注销 (5)">注销 (5)</a>
                  </li>
                  <li>
                    <a href="#d" class="toc-h2 toc-link" data-title="新订单单（D）">新订单单（D）</a>
                  </li>
                  <li>
                    <a href="#f" class="toc-h2 toc-link" data-title="订单取消请求（F）">订单取消请求（F）</a>
                  </li>
                  <li>
                    <a href="#9" class="toc-h2 toc-link" data-title="订单取消拒绝（9）">订单取消拒绝（9）</a>
                  </li>
                  <li>
                    <a href="#h" class="toc-h2 toc-link" data-title="订单状态请求（H）">订单状态请求（H）</a>
                  </li>
                  <li>
                    <a href="#8" class="toc-h2 toc-link" data-title="执行报告（8）">执行报告（8）</a>
                  </li>
                  <li>
                    <a href="#3" class="toc-h2 toc-link" data-title="拒绝（3）">拒绝（3）</a>
                  </li>
              </ul>
          </li>
      </ul>
    </div>
    <div class="page-wrapper">
      <div class="dark-box"></div>
      <div class="content">
        <h1 id='fix-api'>FIX API</h1>
<p>FIX（金融信息交换）是一种标准的电子消息传输协议，可用于下订单、接收订单更新和执行，以及取消订单。我们的 FIX API 基于 FIX 4.2 规范，并模仿了其他热门加密货币交易所的 FIX 实现。</p>

<p>FIX 终端点：tcp+ssl://fix.btse.com:9876</p>

<table><thead>
<tr>
<th>环境</th>
<th>SocketConnectHost</th>
<th>SocketConnectPort</th>
</tr>
</thead><tbody>
<tr>
<td>测试</td>
<td>tcp+ssl://fix.btse.io</td>
<td>9876</td>
</tr>
<tr>
<td>生产</td>
<td>tcp+ssl://fix.btse.com</td>
<td>9876</td>
</tr>
</tbody></table>

<p>Spot 和 Futures 的会话是分开的。</p>

<table><thead>
<tr>
<th>SenderSubID</th>
</tr>
</thead><tbody>
<tr>
<td>SPOT</td>
</tr>
<tr>
<td>FUTURES</td>
</tr>
</tbody></table>
<h1 id='185368440e'>更新日志</h1><h2 id='1-1-3-2023-7-10'>版本 1.1.3（2023年7月10日）</h2>
<p>添加 <a href="#0">心跳 (0)</a> 推荐</p>
<h2 id='1-1-2-2023-7-10'>版本 1.1.2（2023年7月10日）</h2>
<ul>
<li>在 Futures 市场中应用新的符号名称。在 <a href="#a">登录 (A)</a> 消息中添加 ApplyNewSymbolName</li>
</ul>
<h2 id='1-1-1-2023-2-7'>版本 1.1.1（2023年2月7日）</h2>
<ul>
<li>修改常见请求属性</li>
</ul>
<h2 id='1-1-0-2022-12-6'>版本 1.1.0（2022年12月6日）</h2>
<ul>
<li>发布期货市场交易功能 <a href="#fix-api">FIX API</a></li>
</ul>
<h2 id='1-0-0-2022-10-18'>版本 1.0.0（2022年10月18日）</h2>
<ul>
<li>发布现货市场交易功能 <a href="#fix-api">FIX API</a></li>
</ul>
<h1 id='887e990e90'>速率限制</h1>
<p>速率限制约束如下：</p>

<table><thead>
<tr>
<th>组别</th>
<th>包括的消息类型</th>
<th>描述</th>
</tr>
</thead><tbody>
<tr>
<td>Auth</td>
<td>Logon (A), Logout (5)</td>
<td>每组 1 秒 2 次</td>
</tr>
<tr>
<td>General</td>
<td>除 Logon (A) 和 Logout (5) 之外的所有消息类型</td>
<td>每组 1 秒 30 次</td>
</tr>
</tbody></table>

<p>当违反速率限制规则时，客户端的请求将被拒绝，服务器将返回业务消息拒绝 (j)。</p>

<table><thead>
<tr>
<th>标签</th>
<th>名称</th>
<th>示例</th>
<th>描述</th>
</tr>
</thead><tbody>
<tr>
<td>8</td>
<td>BeginString</td>
<td>FIX.4.2</td>
<td>FIX 版本</td>
</tr>
<tr>
<td>9</td>
<td>BodyLength</td>
<td>162</td>
<td>消息正文的长度（以字节为单位）</td>
</tr>
<tr>
<td>10</td>
<td>CheckSum</td>
<td>118</td>
<td>消息的校验和</td>
</tr>
<tr>
<td>34</td>
<td>MsgSeqNum</td>
<td>17</td>
<td>消息的序列号</td>
</tr>
<tr>
<td>35</td>
<td>MsgType</td>
<td>j</td>
<td>始终设置为 &quot;j&quot;：业务消息拒绝</td>
</tr>
<tr>
<td>45</td>
<td>RefSeqNum</td>
<td>11</td>
<td>被拒绝消息的序列号</td>
</tr>
<tr>
<td>49</td>
<td>SenderCompID</td>
<td>BTSE</td>
<td>始终设置为 &quot;BTSE&quot;</td>
</tr>
<tr>
<td>52</td>
<td>SendingTime</td>
<td>20220914-10:27:55</td>
<td>消息的发送时间</td>
</tr>
<tr>
<td>56</td>
<td>TargetCompID</td>
<td>c123...05a</td>
<td>客户 API 密钥</td>
</tr>
<tr>
<td>57</td>
<td>TargetSubID</td>
<td>SPOT</td>
<td>&quot;SPOT&quot;：现货市场；&quot;FUTURES&quot;：期货市场</td>
</tr>
<tr>
<td>58</td>
<td>Text</td>
<td>exceeding rate limit</td>
<td>详细信息</td>
</tr>
<tr>
<td>372</td>
<td>RefMsgType</td>
<td>F</td>
<td>被拒绝消息的消息类型</td>
</tr>
<tr>
<td>380</td>
<td>BusinessRejectReason</td>
<td>4</td>
<td>始终设置为 &quot;4&quot;：应用程序不可用</td>
</tr>
</tbody></table>
<h1 id='dc6de3fa86'>消息</h1>
<p>FIX 协议使用字段分隔符（字符：<code>0x01</code>）来分隔消息中的属性。</p>
<h2 id='8402e80a51'>常见请求属性</h2>
<p>以下属性在每个客户端的请求消息中都是必需的。</p>

<table><thead>
<tr>
<th>标签</th>
<th>名称</th>
<th>示例</th>
<th>描述</th>
</tr>
</thead><tbody>
<tr>
<td>8</td>
<td>BeginString</td>
<td>FIX.4.2</td>
<td>必须设置为 &quot;FIX.4.2&quot;</td>
</tr>
<tr>
<td>9</td>
<td>BodyLength</td>
<td>162</td>
<td>消息体的长度，以字节为单位</td>
</tr>
<tr>
<td>34</td>
<td>MsgSeqNum</td>
<td>1</td>
<td>消息序列，从 1 开始，每个消息必须递增。具有重复或乱序序列号的消息将被拒绝。在新连接上会重置序列号。</td>
</tr>
<tr>
<td>35</td>
<td>MsgType</td>
<td>8</td>
<td>消息类型</td>
</tr>
<tr>
<td>49</td>
<td>SenderCompID</td>
<td>zyf...IZx</td>
<td>客户端 API 密钥</td>
</tr>
<tr>
<td>50</td>
<td>SenderSubID</td>
<td>SPOT</td>
<td>&quot;SPOT&quot;：现货市场；&quot;FUTURES&quot;：期货市场</td>
</tr>
<tr>
<td>52</td>
<td>SendingTime</td>
<td>20220916-07:29:07</td>
<td>消息的发送时间</td>
</tr>
<tr>
<td>56</td>
<td>TargetCompID</td>
<td>BTSE</td>
<td>必须设置为 &quot;BTSE&quot;（用于来自客户端的消息）</td>
</tr>
<tr>
<td>10</td>
<td>CheckSum</td>
<td>145</td>
<td>消息的校验和</td>
</tr>
</tbody></table>
<h2 id='a'>登录 (A)</h2><div class="highlight"><pre class="highlight java tab-java"><code><span class="kn">import</span> <span class="nn">org.apache.commons.codec.binary.Hex</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.apache.commons.codec.digest.HmacAlgorithms</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.apache.commons.codec.digest.HmacUtils</span><span class="o">;</span>

<span class="c1">// initialize String parameters: apiSecret, sendingTime, messageType, messageSeqNum, senderCompID, targetCompID</span>


<span class="c1">// compute the SHA384 HMAC using the API secret</span>
<span class="kd">final</span> <span class="kt">char</span> <span class="no">SOH</span> <span class="o">=</span> <span class="mi">1</span><span class="o">;</span>
<span class="kd">final</span> <span class="nc">CharSequence</span> <span class="no">SEPARATOR</span> <span class="o">=</span> <span class="nc">Character</span><span class="o">.</span><span class="na">toString</span><span class="o">(</span><span class="no">SOH</span><span class="o">);</span>

<span class="kd">final</span> <span class="nc">String</span> <span class="no">DATARAW</span> <span class="o">=</span> <span class="nc">String</span><span class="o">.</span><span class="na">join</span><span class="o">(</span><span class="no">SEPARATOR</span><span class="o">,</span> <span class="n">sendingTime</span><span class="o">,</span> <span class="n">messageType</span><span class="o">,</span> <span class="n">messageSeqNum</span><span class="o">,</span> <span class="n">senderCompID</span><span class="o">,</span> <span class="n">targetCompID</span><span class="o">);</span>
<span class="kd">final</span> <span class="nc">String</span> <span class="no">SIGNATURE</span> <span class="o">=</span> <span class="nc">Hex</span><span class="o">.</span><span class="na">encodeHexString</span><span class="o">(</span><span class="nc">HmacUtils</span><span class="o">.</span><span class="na">getInitializedMac</span><span class="o">(</span><span class="nc">HmacAlgorithms</span><span class="o">.</span><span class="na">HMAC_SHA_384</span><span class="o">,</span> <span class="n">apiSecret</span><span class="o">.</span><span class="na">getBytes</span><span class="o">()).</span><span class="na">doFinal</span><span class="o">(</span><span class="n">dataRaw</span><span class="o">.</span><span class="na">getBytes</span><span class="o">()));</span>
</code></pre></div>
<p>由客户端发送以初始化FIX会话。必须在建立连接后发送的第一条消息。每个连接只能建立一个会话；额外的登录消息将被拒绝。客户端的API密钥和密钥可以在BTSE门户中的API页面生成。创建具有使用FIX API权限的密钥。</p>

<table><thead>
<tr>
<th>标签</th>
<th>名称</th>
<th>值</th>
<th>描述</th>
</tr>
</thead><tbody>
<tr>
<td>35</td>
<td>MsgType</td>
<td>A</td>
<td></td>
</tr>
<tr>
<td>95</td>
<td>RawDataLength</td>
<td>96</td>
<td>RawData的长度</td>
</tr>
<tr>
<td>96</td>
<td>RawData</td>
<td>8f7e...4783</td>
<td>出于安全原因，登录消息必须由客户端签名。要计算签名，使用API密钥，将以下字段连接在一起，用FIX字段分隔符（字节0x01）连接，并使用API密钥计算SHA384 HMAC：<br/><br/> * 发送时间 (52)<br/> * 消息类型 (35)<br/> * 消息序列号 (34)<br/> * 发送者组件标识 (49)<br/> * 目标组件标识 (56)<br/><br/>生成的哈希应以十六进制编码。</td>
</tr>
<tr>
<td>98</td>
<td>EncryptMethod</td>
<td>0</td>
<td>必须设置为 &quot;0&quot; (无)</td>
</tr>
<tr>
<td>108</td>
<td>HeartBInt</td>
<td>30</td>
<td>如果客户端将心跳间隔设置为N。我们建议您每隔N - 5秒左右发送一个心跳以保持连接活动。</td>
</tr>
<tr>
<td>141</td>
<td>ResetSeqNumFlag</td>
<td>Y</td>
<td>必须设置为 &quot;Y&quot;</td>
</tr>
<tr>
<td>5001</td>
<td>ApplyNewSymbolName</td>
<td>Y</td>
<td>此字段仅适用于期货。如果未提供此字段，FIX仅接受旧的符号名称。新符号模式：BTC-PERP，旧符号模式：BTCPFC</td>
</tr>
</tbody></table>
<h2 id='0'>心跳 (0)</h2>
<p>如果客户端将心跳间隔设置为N。我们建议您每隔N - 5秒左右发送一个心跳以保持连接活动。</p>

<table><thead>
<tr>
<th>标签</th>
<th>名称</th>
<th>值</th>
<th>描述</th>
</tr>
</thead><tbody>
<tr>
<td>35</td>
<td>MsgType</td>
<td>0</td>
<td></td>
</tr>
<tr>
<td>112</td>
<td>TestReqID</td>
<td>123</td>
<td>如果此心跳是对TestRequest的响应，从TestRequest复制。</td>
</tr>
</tbody></table>
<h2 id='1'>测试请求 (1)</h2>
<table><thead>
<tr>
<th>标签</th>
<th>名称</th>
<th>值</th>
<th>描述</th>
</tr>
</thead><tbody>
<tr>
<td>35</td>
<td>MsgType</td>
<td>1</td>
<td></td>
</tr>
<tr>
<td>112</td>
<td>TestReqID</td>
<td>123</td>
<td>任意字符串，将由心跳消息回显。</td>
</tr>
</tbody></table>
<h2 id='5'>注销 (5)</h2>
<p>由任一方发送以终止会话。另一方应以另一个注销消息响应以确认会话终止。连接将在之后关闭。   </p>

<table><thead>
<tr>
<th>标签</th>
<th>名称</th>
<th>值</th>
<th>描述</th>
</tr>
</thead><tbody>
<tr>
<td>35</td>
<td>MsgType</td>
<td>5</td>
<td></td>
</tr>
</tbody></table>
<h2 id='d'>新订单单（D）</h2>
<p>由客户端发送以提交新订单。FIX API当前仅支持市价单和限价单。</p>

<table><thead>
<tr>
<th>标签</th>
<th>名称</th>
<th>值</th>
<th>描述</th>
</tr>
</thead><tbody>
<tr>
<td>35</td>
<td>MsgType</td>
<td>D</td>
<td></td>
</tr>
<tr>
<td>21</td>
<td>HandlInst</td>
<td>1</td>
<td>必须设置为 &quot;1&quot; (AutomatedExecutionNoIntervention)</td>
</tr>
<tr>
<td>11</td>
<td>ClOrdID</td>
<td>order123</td>
<td>任意选择的用于识别订单的客户端字符串；必须唯一</td>
</tr>
<tr>
<td>55</td>
<td>Symbol</td>
<td>BTC-USD</td>
<td>符号名称</td>
</tr>
<tr>
<td>40</td>
<td>OrdType</td>
<td>2</td>
<td>&quot;1&quot;: 市价; &quot;2&quot;: 限价</td>
</tr>
<tr>
<td>38</td>
<td>OrderQty</td>
<td>1.1</td>
<td>基本单位的订单大小（在限价订单和市价卖单中必需）</td>
</tr>
<tr>
<td>44</td>
<td>Price</td>
<td>18000</td>
<td>限价价格或市价买入价格（在限价订单和市价买入订单中必需）</td>
</tr>
<tr>
<td>54</td>
<td>Side</td>
<td>1</td>
<td>&quot;1&quot;: 买入; &quot;2&quot;: 卖出</td>
</tr>
<tr>
<td>59</td>
<td>TimeInForce</td>
<td>1</td>
<td>&quot;1&quot;: 永久有效; &quot;3&quot;: 立即成交或取消; &quot;4&quot;: 填成或立刻取消（限价单）</td>
</tr>
<tr>
<td>18</td>
<td>ExecInst</td>
<td>6</td>
<td>此参数是可选的。 &quot;E&quot;: 仅减少， &quot;6&quot;: 仅发布，未提供: 标准</td>
</tr>
</tbody></table>

<p>如果订单被接受，将返回执行报告（8），其中ExecType为：0（新建）、1（部分成交）、2（全部成交）、4（已取消）、7（已停止）、8（已拒绝）。</p>
<h2 id='f'>订单取消请求（F）</h2>
<p>由客户端发送以请求取消订单。</p>

<table><thead>
<tr>
<th>标签</th>
<th>名称</th>
<th>值</th>
<th>描述</th>
</tr>
</thead><tbody>
<tr>
<td>35</td>
<td>MsgType</td>
<td>F</td>
<td></td>
</tr>
<tr>
<td>37</td>
<td>OrderID</td>
<td>order123</td>
<td>订单的系统分配的订单ID</td>
</tr>
<tr>
<td>41</td>
<td>OrigClOrdID</td>
<td>order123</td>
<td>订单的客户分配的订单ID</td>
</tr>
<tr>
<td>55</td>
<td>Symbol</td>
<td>BTC-USD</td>
<td>符号名称</td>
</tr>
</tbody></table>

<p>只应提供OrderID（37）或OrigClOrdID（41）中的一个。</p>

<p>如果订单成功取消，将返回执行报告（8）。否则，将返回订单取消拒绝（9）。</p>
<h2 id='9'>订单取消拒绝（9）</h2>
<p>由服务器发送以通知客户端订单取消请求（F）失败。</p>

<table><thead>
<tr>
<th>标签</th>
<th>名称</th>
<th>值</th>
<th>描述</th>
</tr>
</thead><tbody>
<tr>
<td>35</td>
<td>MsgType</td>
<td>9</td>
<td></td>
</tr>
<tr>
<td>37</td>
<td>OrderID</td>
<td>order123</td>
<td>从OrderCancelRequest复制，如果未在OrderCancelRequest中提供，将不会显示。</td>
</tr>
<tr>
<td>41</td>
<td>OrigClOrdID</td>
<td>order123</td>
<td>从OrderCancelRequest复制，如果未在OrderCancelRequest中提供，将不会显示。</td>
</tr>
<tr>
<td>39</td>
<td>OrdStatus</td>
<td>4</td>
<td>如果订单已取消，则为&quot;4&quot;（已取消）</td>
</tr>
<tr>
<td>102</td>
<td>CxlRejReason</td>
<td>1</td>
<td>&quot;1&quot;: 未知订单, &quot;99&quot;: 其他</td>
</tr>
<tr>
<td>434</td>
<td>CxlRejResponseTo</td>
<td>1</td>
<td>始终设置为 &quot;1&quot;</td>
</tr>
</tbody></table>
<h2 id='h'>订单状态请求（H）</h2>
<p>由服务器发送以通知客户端订单取消请求（F）失败。</p>

<table><thead>
<tr>
<th>标签</th>
<th>名称</th>
<th>值</th>
<th>描述</th>
</tr>
</thead><tbody>
<tr>
<td>35</td>
<td>MsgType</td>
<td>H</td>
<td></td>
</tr>
<tr>
<td>37</td>
<td>OrderID</td>
<td>order123</td>
<td>要请求的订单的OrderID，或&quot;*&quot;以请求所有待处理订单</td>
</tr>
<tr>
<td>41</td>
<td>OrigClOrdID</td>
<td>order123</td>
<td>订单的客户分配的订单ID</td>
</tr>
<tr>
<td>54</td>
<td>Side</td>
<td>1</td>
<td>&quot;1&quot;: 买入; &quot;2&quot;: 卖出</td>
</tr>
<tr>
<td>55</td>
<td>Symbol</td>
<td>BTC-USD</td>
<td>符号名称</td>
</tr>
</tbody></table>

<p>服务器将以所请求的订单或订单响应一个执行报告（8），ExecType=I（订单状态）。应仅提供OrderID（37）和OrigClOrdID（41）中的一个。如果同时提供OrderID（37）和OrigClOrdID（41），则仅应用OrderID（37）。当没有未完成订单时，服务器将包含Text（58）为&quot;无未完成订单&quot;。</p>
<h2 id='8'>执行报告（8）</h2>
<p>由服务器在订单被成交，订单状态发生变化，或响应来自客户端的NewOrderSingle（D），OrderCancelRequest（F），或OrderStatusRequest（H）消息时发送。</p>

<table><thead>
<tr>
<th>标签</th>
<th>名称</th>
<th>值</th>
<th>描述</th>
</tr>
</thead><tbody>
<tr>
<td>11</td>
<td>ClOrderId</td>
<td>order123</td>
<td>客户端选择的订单ID。</td>
</tr>
<tr>
<td>12</td>
<td>Commission</td>
<td>0.002</td>
<td>交易费。仅当此消息是成交的结果时才会出现</td>
</tr>
<tr>
<td>13</td>
<td>CommType</td>
<td>3</td>
<td>始终为3</td>
</tr>
<tr>
<td>14</td>
<td>CumQty</td>
<td>0.4</td>
<td>已成交的订单数量</td>
</tr>
<tr>
<td>17</td>
<td>ExecID</td>
<td>d840c87b-ad98-47b1-95d3-4d41950fa776</td>
<td>订单ID</td>
</tr>
<tr>
<td>31</td>
<td>LastPx</td>
<td>7999.25</td>
<td>成交价格。仅当此消息是成交的结果时才会出现</td>
</tr>
<tr>
<td>32</td>
<td>LastQty</td>
<td>0.4</td>
<td>成交数量。仅当此消息是成交的结果时才会出现</td>
</tr>
<tr>
<td>35</td>
<td>MsgType</td>
<td>8</td>
<td></td>
</tr>
<tr>
<td>37</td>
<td>OrderID</td>
<td>d840c87b-ad98-47b1-95d3-4d41950fa776</td>
<td>订单ID</td>
</tr>
<tr>
<td>38</td>
<td>OrderQty</td>
<td>1.2</td>
<td>原始订单数量</td>
</tr>
<tr>
<td>39</td>
<td>OrdStatus</td>
<td>0</td>
<td>订单状态（见下文）</td>
</tr>
<tr>
<td>44</td>
<td>Price</td>
<td>8000</td>
<td>原始订单价格</td>
</tr>
<tr>
<td>54</td>
<td>Side</td>
<td>1</td>
<td>&quot;1&quot;: 买入; &quot;2&quot;: 卖出</td>
</tr>
<tr>
<td>55</td>
<td>Symbol</td>
<td>BTC-USD</td>
<td>符号名称</td>
</tr>
<tr>
<td>58</td>
<td>Text</td>
<td>文本</td>
<td>拒绝订单的原因描述</td>
</tr>
<tr>
<td>60</td>
<td>TransactTime</td>
<td>20190525-08:26:38.989</td>
<td>订单更新的时间。仅在订单更新时出现</td>
</tr>
<tr>
<td>103</td>
<td>OrdRejReason</td>
<td>11</td>
<td>&quot;11&quot;: 请求失败时（UNSUPPORTED_ORDER_CHARACTERISTIC）。拒绝原因的详细信息将显示在Text（58）中</td>
</tr>
<tr>
<td>150</td>
<td>ExecType</td>
<td>1</td>
<td>此消息的原因（见下文）</td>
</tr>
<tr>
<td>151</td>
<td>LeavesQty</td>
<td>0.8</td>
<td>仍然开放的订单数量</td>
</tr>
<tr>
<td>1057</td>
<td>AggressorIndicator</td>
<td>Y</td>
<td>&quot;Y&quot;: 主动成交; &quot;N&quot;: 被动成交。仅当此消息是成交的结果时才会出现</td>
</tr>
<tr>
<td>5000</td>
<td>Liquidation</td>
<td>Y</td>
<td>&quot;Y&quot;: 消息对应于市场清算订单。 &quot;N&quot;或不出现：不是。</td>
</tr>
</tbody></table>
<h3 id='exectype'>ExecType值</h3>
<p>ExecType（150）字段指示发送此ExecutionReport的原因。</p>

<table><thead>
<tr>
<th>ExecType</th>
<th>描述</th>
</tr>
</thead><tbody>
<tr>
<td>0</td>
<td>新订单</td>
</tr>
<tr>
<td>1</td>
<td>部分成交的订单</td>
</tr>
<tr>
<td>3</td>
<td>完全成交的订单</td>
</tr>
<tr>
<td>4</td>
<td>订单已取消</td>
</tr>
<tr>
<td>5</td>
<td>订单已修改</td>
</tr>
<tr>
<td>7</td>
<td>订单退款（自成交）</td>
</tr>
<tr>
<td>8</td>
<td>对拒绝的NewOrderSingle（D）请求的响应</td>
</tr>
<tr>
<td>I</td>
<td>对OrderStatusRequest（H）请求的响应</td>
</tr>
</tbody></table>

<p>请注意，每个订单更改都会发送一个执行报告消息。</p>
<h3 id='ordstatus'>OrdStatus值</h3>
<table><thead>
<tr>
<th>OrdStatus</th>
<th>描述</th>
</tr>
</thead><tbody>
<tr>
<td>0</td>
<td>新订单</td>
</tr>
<tr>
<td>1</td>
<td>部分成交的订单</td>
</tr>
<tr>
<td>3</td>
<td>完全成交的订单</td>
</tr>
<tr>
<td>4</td>
<td>已取消的订单</td>
</tr>
<tr>
<td>5</td>
<td>修改的订单</td>
</tr>
<tr>
<td>7</td>
<td>退款的订单</td>
</tr>
<tr>
<td>8</td>
<td>拒绝的订单</td>
</tr>
</tbody></table>
<h2 id='3'>拒绝（3）</h2>
<p>由服务器以响应无效消息发送。</p>

<table><thead>
<tr>
<th>标签</th>
<th>名称</th>
<th>值</th>
<th>描述</th>
</tr>
</thead><tbody>
<tr>
<td>35</td>
<td>MsgType</td>
<td>3</td>
<td></td>
</tr>
<tr>
<td>45</td>
<td>RefSeqNum</td>
<td>2</td>
<td>被拒绝消息的序列号</td>
</tr>
<tr>
<td>371</td>
<td>RefTagID</td>
<td>38</td>
<td>被拒绝字段的标签编号</td>
</tr>
<tr>
<td>372</td>
<td>RefMsgType</td>
<td>D</td>
<td>被拒绝消息的消息类型</td>
</tr>
<tr>
<td>58</td>
<td>Text</td>
<td>缺少数量</td>
<td>可读的原因描述</td>
</tr>
<tr>
<td>373</td>
<td>SessionRejectReason</td>
<td>1</td>
<td>用于识别拒绝原因的代码</td>
</tr>
</tbody></table>

      </div>
      <div class="dark-box">
      </div>
    </div>
    <script>
const DEFAULT_LANG = 'en';
const IS_DEV = false;
const DOCS_PREFIX = IS_DEV ? '/' : '/docs/';
const TAB_MAP = {
  spot: {
    en: 'Spot',
    cn: '现货'
  },
  futures: {
    en: 'Futures',
    cn: '期货'
  },
  otc: {
    en: 'OTC',
    cn: '场外交易'
  },
  wallet: {
    en: 'Wallet/Convert/Transfer',
    cn: '钱包/转换/转账'
  },
  streaming: {
    en: 'Streaming',
    cn: '數據流'
  },
  fix: {
    en: 'FIX',
    cn: 'FIX'
  },
  earn: {
    en: 'Earn',
    cn: '賺幣'
  }
};

function getUrlRelativePath() {
  let url = document.location.toString();
  let arrUrl = url.split('//');
  let start = arrUrl[1].indexOf('/');
  let relUrl = arrUrl[1].substring(start);
  if (relUrl.indexOf('?') !== -1) {
    relUrl = relUrl.split("?")[0];
  }
  if (relUrl.indexOf('#') !== -1) {
    relUrl = relUrl.split('#')[0];
  }
  return relUrl;
}

function capitalizeFirstLetter(s) {
  return s.charAt(0).toUpperCase() + s.slice(1);
}

function getLang() {
  const url = getUrlRelativePath();
  const isEN = url.indexOf('cn') === -1;
  return isEN ? 'en' : 'cn';
}

function getTabTemplate(isTab, href, tabKey, tabText) {
  const classList = isTab ? 'nav_cell nav_tab' : 'menu-row'
  const idPrefix = isTab ? 'nav_link_' : 'menu-link-'
  const linkClass = isTab ? 'nav-link' : 'menu-link'
  return `
    <span class="${classList}">
      <a href="${href}" id="${idPrefix}${tabKey}" class="${linkClass}">${tabText}</a>
    </span>
  `
}

function generateNavHtml(lang, isTab) {
  return Object.keys(TAB_MAP).map(tabKey => {
    const tabText = TAB_MAP[tabKey][lang] || capitalizeFirstLetter(tabKey);
    const href = `${DOCS_PREFIX}${tabKey}/${lang}/`;
    return getTabTemplate(isTab, href, tabKey, tabText);
  })
}

function addChangeLanguageLink(lang) {
  // add change lang link in navbar.
  const langText = lang === 'en' ? '中文' : 'English';
  const langHref = lang === 'en' ? location.href.replace('/en/', '/cn/') : location.href.replace('/cn/', '/en/');
  const langLink = `<a class="change-lang-link" href="${langHref}">${langText}</a>`;
  $('#navBox').append(`<span class="nav_cell">${langLink}</span>`);
}

$(function() {
  const lang = getLang();
  $('#navBox').html(generateNavHtml(lang, true));
  $('#menuDropdown').html(generateNavHtml(lang, false));
  const tabList = Object.keys(TAB_MAP);
  for (let i = 0; i < tabList.length; i ++) {
    const tabKey = tabList[i];
    if (location.href.indexOf(`/${tabKey}/`) > 0) {
      $('.nav-link').removeClass('current');
      $(`#nav_link_${tabKey}`).addClass('current');
      $('.menu-link').removeClass('current');
      $(`#menu-link-${tabKey}`).addClass('current');
      break;
    }
  }
  $('#menuDropdownBtn').click(() => {
    $('.menu-dropdown').toggleClass('hide');
  });
  addChangeLanguageLink(lang);
});
  </script>
  </body>
</html>
